#!/bin/bash

# Build folder with 5 files
echo "############################################################################################################"
echo " Create >>> Creating the folder ./envtest with 6 files. Each file contains valueX where X is a index of file"
echo "############################################################################################################"
echo
mkdir -p ./envtest
for i in {0..5}
do
   echo value"$i" > envtest/"File$(printf "%03d" "$i").txt"
done

# Run the test
echo
echo "###############################################################################################################"
echo " Test 1 >>> Run the test command:[./goenvdir ./envtest env] . Expected list of 6 env variables like File00X=valueX"
echo "###############################################################################################################"
echo
./goenvdir ./envtest env
echo
echo "###############################################################################################################"
echo " Test 2 >>> Run the test with command [./goenvdir ./envtest ls -la]. Expected output of 'ls -la' of currect folder"
echo "###############################################################################################################"
echo
./goenvdir ./envtest ls -la

# Clean up folder
echo
echo "###############################################################################################################"
echo " Clean up >>> Delete the ./envtest folder."
echo "###############################################################################################################"
echo
rm -r ./envtest

# Run the test with empty folder
echo
echo "#############################################################################################################"
echo " Create >>> Creating the folder ./emptyenv with no files."
echo "#############################################################################################################"
echo
mkdir -p ./emptyenv
echo
echo "###############################################################################################################"
echo " Test 3 >>> Run the test with command [./goenvdir ./emptyenv env]. Expected nothing to out"
echo "###############################################################################################################"
echo 

./goenvdir ./emptyenv env

echo
echo "###############################################################################################################"
echo " Test 4 >>> Run the command [./goenvdir ./emptyenv ] with missign one argument. Expected error & usage printout"
echo "###############################################################################################################"
echo 

./goenvdir ./emptyenv

echo
echo "###############################################################################################################"
echo " Test 5 >>> Run the command [./goenvdir ] without arguments. Expected error & usage printout"
echo "###############################################################################################################"
echo 
# Clean up empty folder
./goenvdir
echo
echo "###############################################################################################################"
echo " Clean up >>> Delete the ./emptyenv folder."
echo "###############################################################################################################"
echo

rm -r ./emptyenv

echo
echo "###############################################################################################################"
echo " Finish >>>"
echo "###############################################################################################################"
echo